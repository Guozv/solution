# K

考虑枚举这个移动后区间的位置，下文称窗口。

我们分两种情况考虑。

即区间向左移动和向右移动的情况。

对于向左移动的情况。

窗口从原来最靠右的区间开始，此时答案等于不变的答案。

考虑将窗口向左移动一格，设原来窗口为[l,r] 则 d[l-1]=k d[l-1]=k-1 会影响答案 d[r]=k,d[r]=k+1 同理

然后如果有区间完全被移出了窗口，则发现用滑动窗口维护即可。

这两种区间排序后是独立的两个部分，开一个以区间编号为下标的线段树维护一下即可。

